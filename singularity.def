Bootstrap: docker
From: ubuntu:20.04
Stage: build

%setup
    touch /file1
    touch ${SINGULARITY_ROOTFS}/file2

%post
    export DEBIAN_FRONTEND=noninteractive
    apt-get update
    apt-get install -y git
    apt-get install -y mpich
    apt-get install -y cmake  # Install cmake
    git clone --recurse-submodules https://github.com/BiceMar/sweng_project_part2.git
    cd sweng_project_part2
    ./build.sh
    ctest --test-dir build

%runscript
    echo "Test run scripts"
    

%test
    echo "start test..."
    pwd
    ls
    #cd build
    #ctest --test-dir build

%labels
    SWENG4HPC project v.1.0
